# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'DemoApp.ui'
#
# Created by: PyQt5 UI code generator 5.15.10
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets
from RSA_Algorithm import RSA

class Ui_MainWindow(object):
    def setupUi(self, MainWindow):
        MainWindow.setObjectName("MainWindow")
        MainWindow.resize(600, 640)
        self.lbTittle = QtWidgets.QLabel(MainWindow)
        self.lbTittle.setGeometry(QtCore.QRect(0, 9, 601, 61))
        font = QtGui.QFont()
        font.setFamily("JetBrains Mono")
        font.setPointSize(10)
        font.setBold(True)
        font.setItalic(False)
        font.setUnderline(False)
        font.setWeight(75)
        font.setStrikeOut(False)
        font.setKerning(True)
        self.lbTittle.setFont(font)
        self.lbTittle.setLayoutDirection(QtCore.Qt.LeftToRight)
        self.lbTittle.setAutoFillBackground(True)
        self.lbTittle.setAlignment(QtCore.Qt.AlignCenter)
        self.lbTittle.setWordWrap(False)
        self.lbTittle.setOpenExternalLinks(False)
        self.lbTittle.setObjectName("lbTittle")
        self.txtInput = QtWidgets.QTextEdit(MainWindow)
        self.txtInput.setGeometry(QtCore.QRect(80, 80, 511, 71))
        self.txtInput.setObjectName("txtInput")
        self.lbMsg = QtWidgets.QLabel(MainWindow)
        self.lbMsg.setGeometry(QtCore.QRect(10, 80, 71, 71))
        font = QtGui.QFont()
        font.setFamily("JetBrains Mono")
        self.lbMsg.setFont(font)
        self.lbMsg.setObjectName("lbMsg")
        self.btnEnc = QtWidgets.QPushButton(MainWindow)
        self.btnEnc.setGeometry(QtCore.QRect(340, 155, 251, 31))
        font = QtGui.QFont()
        font.setFamily("JetBrains Mono")
        self.btnEnc.setFont(font)
        self.btnEnc.setObjectName("btnEnc")
        self.gbtnResult = QtWidgets.QGroupBox(MainWindow)
        self.gbtnResult.setGeometry(QtCore.QRect(10, 190, 581, 441))
        self.gbtnResult.setObjectName("gbtnResult")
        self.lbP = QtWidgets.QLabel(self.gbtnResult)
        self.lbP.setGeometry(QtCore.QRect(10, 20, 101, 30))
        font = QtGui.QFont()
        font.setFamily("JetBrains Mono")
        font.setPointSize(10)
        self.lbP.setFont(font)
        self.lbP.setAlignment(QtCore.Qt.AlignCenter)
        self.lbP.setObjectName("lbP")
        self.txtP = QtWidgets.QTextEdit(self.gbtnResult)
        self.txtP.setGeometry(QtCore.QRect(130, 20, 441, 30))
        font = QtGui.QFont()
        font.setFamily("JetBrains Mono")
        font.setPointSize(10)
        self.txtP.setFont(font)
        self.txtP.setReadOnly(False)
        self.txtP.setObjectName("txtP")
        self.lbQ = QtWidgets.QLabel(self.gbtnResult)
        self.lbQ.setGeometry(QtCore.QRect(10, 60, 101, 30))
        font = QtGui.QFont()
        font.setFamily("JetBrains Mono")
        font.setPointSize(10)
        self.lbQ.setFont(font)
        self.lbQ.setAlignment(QtCore.Qt.AlignCenter)
        self.lbQ.setObjectName("lbQ")
        self.txtQ = QtWidgets.QTextEdit(self.gbtnResult)
        self.txtQ.setGeometry(QtCore.QRect(130, 60, 441, 30))
        font = QtGui.QFont()
        font.setFamily("JetBrains Mono")
        font.setPointSize(10)
        self.txtQ.setFont(font)
        self.txtQ.setReadOnly(True)
        self.txtQ.setObjectName("txtQ")
        self.lbE = QtWidgets.QLabel(self.gbtnResult)
        self.lbE.setGeometry(QtCore.QRect(10, 100, 101, 30))
        font = QtGui.QFont()
        font.setFamily("JetBrains Mono")
        font.setPointSize(10)
        self.lbE.setFont(font)
        self.lbE.setAlignment(QtCore.Qt.AlignCenter)
        self.lbE.setObjectName("lbE")
        self.txtE = QtWidgets.QTextEdit(self.gbtnResult)
        self.txtE.setGeometry(QtCore.QRect(130, 100, 441, 30))
        font = QtGui.QFont()
        font.setFamily("JetBrains Mono")
        font.setPointSize(10)
        self.txtE.setFont(font)
        self.txtE.setReadOnly(True)
        self.txtE.setObjectName("txtE")
        self.lbD = QtWidgets.QLabel(self.gbtnResult)
        self.lbD.setGeometry(QtCore.QRect(10, 140, 101, 30))
        font = QtGui.QFont()
        font.setFamily("JetBrains Mono")
        font.setPointSize(10)
        self.lbD.setFont(font)
        self.lbD.setAlignment(QtCore.Qt.AlignCenter)
        self.lbD.setObjectName("lbD")
        self.txtD = QtWidgets.QTextEdit(self.gbtnResult)
        self.txtD.setGeometry(QtCore.QRect(130, 140, 441, 30))
        font = QtGui.QFont()
        font.setFamily("JetBrains Mono")
        font.setPointSize(10)
        self.txtD.setFont(font)
        self.txtD.setReadOnly(True)
        self.txtD.setObjectName("txtD")
        self.lbN = QtWidgets.QLabel(self.gbtnResult)
        self.lbN.setGeometry(QtCore.QRect(10, 180, 101, 30))
        font = QtGui.QFont()
        font.setFamily("JetBrains Mono")
        font.setPointSize(10)
        self.lbN.setFont(font)
        self.lbN.setAlignment(QtCore.Qt.AlignCenter)
        self.lbN.setObjectName("lbN")
        self.txtN = QtWidgets.QTextEdit(self.gbtnResult)
        self.txtN.setGeometry(QtCore.QRect(130, 180, 441, 30))
        font = QtGui.QFont()
        font.setFamily("JetBrains Mono")
        font.setPointSize(10)
        self.txtN.setFont(font)
        self.txtN.setReadOnly(True)
        self.txtN.setObjectName("txtN")
        self.lbEnc = QtWidgets.QLabel(self.gbtnResult)
        self.lbEnc.setGeometry(QtCore.QRect(10, 220, 101, 101))
        font = QtGui.QFont()
        font.setFamily("JetBrains Mono")
        font.setPointSize(10)
        self.lbEnc.setFont(font)
        self.lbEnc.setAlignment(QtCore.Qt.AlignCenter)
        self.lbEnc.setObjectName("lbEnc")
        self.txtEnc = QtWidgets.QTextEdit(self.gbtnResult)
        self.txtEnc.setGeometry(QtCore.QRect(130, 220, 441, 100))
        font = QtGui.QFont()
        font.setFamily("JetBrains Mono")
        font.setPointSize(10)
        self.txtEnc.setFont(font)
        self.txtEnc.setReadOnly(True)
        self.txtEnc.setObjectName("txtEnc")
        self.lbDes = QtWidgets.QLabel(self.gbtnResult)
        self.lbDes.setGeometry(QtCore.QRect(10, 330, 101, 101))
        font = QtGui.QFont()
        font.setFamily("JetBrains Mono")
        font.setPointSize(10)
        self.lbDes.setFont(font)
        self.lbDes.setAlignment(QtCore.Qt.AlignCenter)
        self.lbDes.setObjectName("lbDes")
        self.txtDes = QtWidgets.QTextEdit(self.gbtnResult)
        self.txtDes.setGeometry(QtCore.QRect(130, 330, 441, 100))
        font = QtGui.QFont()
        font.setFamily("JetBrains Mono")
        font.setPointSize(10)
        self.txtDes.setFont(font)
        self.txtDes.setReadOnly(True)
        self.txtDes.setObjectName("txtDes")
        self.btnClean = QtWidgets.QPushButton(MainWindow)
        self.btnClean.setGeometry(QtCore.QRect(80, 155, 251, 31))
        font = QtGui.QFont()
        font.setFamily("JetBrains Mono")
        self.btnClean.setFont(font)
        self.btnClean.setObjectName("btnClean")

        self.retranslateUi(MainWindow)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)

        # Kết nối nút bấm
        self.btnEnc.clicked.connect(self.result)
        self.btnClean.clicked.connect(self.cleanTxt)

    def retranslateUi(self, MainWindow):
        _translate = QtCore.QCoreApplication.translate
        MainWindow.setWindowTitle(_translate("MainWindow", "RSA"))
        self.lbTittle.setText(_translate("MainWindow", "Ứng dụng mô phỏng quá trình\n" "mã hóa tin nhắn bằng RSA"))
        self.lbMsg.setText(_translate("MainWindow", "Nhập đoạn \n" "tin nhắn"))
        self.btnEnc.setText(_translate("MainWindow", "Thực hiện mã hóa"))
        self.gbtnResult.setTitle(_translate("MainWindow", "Kết quả"))
        self.lbP.setText(_translate("MainWindow", "p"))
        self.lbQ.setText(_translate("MainWindow", "q"))
        self.lbE.setText(_translate("MainWindow", "e"))
        self.lbD.setText(_translate("MainWindow", "d"))
        self.lbN.setText(_translate("MainWindow", "N"))
        self.lbEnc.setText(_translate("MainWindow", "mã hóa\n" "(Encryption)"))
        self.lbDes.setText(_translate("MainWindow", "Giải mã\n" "(Descryption)"))
        self.btnClean.setText(_translate("MainWindow", "Xóa tin nhắn"))

# Kết nối với lại file giải thuật RSA
    def result(self):
        self.rsa = RSA(keysize=8) # Keysize mặc định là 8
        msg = self.txtInput.toPlainText()
        enc = self.rsa.encrypt(msg)
        dec = self.rsa.decrypt(enc)
        self.txtEnc.setText(str(enc))
        self.txtDes.setText(str(dec))
        self.txtP.setText(str(self.rsa.p))
        self.txtQ.setText(str(self.rsa.q))
        self.txtD.setText(str(self.rsa.d))
        self.txtE.setText(str(self.rsa.e))
        self.txtN.setText(str(self.rsa.N))

    def cleanTxt(self):
        self.txtInput.clear()
        self.txtEnc.clear()
        self.txtDes.clear()
        self.txtP.clear()
        self.txtQ.clear()
        self.txtD.clear()
        self.txtE.clear()
        self.txtN.clear()

if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    MainWindow = QtWidgets.QMainWindow()
    ui = Ui_MainWindow()
    ui.setupUi(MainWindow)
    MainWindow.show()
    sys.exit(app.exec_())

